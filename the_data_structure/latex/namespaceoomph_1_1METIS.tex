\hypertarget{namespaceoomph_1_1METIS}{}\section{oomph\+:\+:M\+E\+T\+IS Namespace Reference}
\label{namespaceoomph_1_1METIS}\index{oomph\+::\+M\+E\+T\+IS@{oomph\+::\+M\+E\+T\+IS}}


Namespace for \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} graph partitioning routines.  


\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef void($\ast$ \hyperlink{namespaceoomph_1_1METIS_aec228e35df8426d16639b961fcf98df1}{Error\+To\+Weight\+Fct\+Pt}) (const double \&spatial\+\_\+error, const double \&max\+\_\+error, const double \&min\+\_\+error, int \&weight)
\begin{DoxyCompactList}\small\item\em Typedef for function pointer to to function that translates spatial error into weight for \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} partitioning. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{namespaceoomph_1_1METIS_af5633647d4ff099648151db2d7d0a1e5}{default\+\_\+error\+\_\+to\+\_\+weight\+\_\+fct} (const double \&spatial\+\_\+error, const double \&max\+\_\+error, const double \&min\+\_\+error, int \&weight)
\begin{DoxyCompactList}\small\item\em Default function that translates spatial error into weight for \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} partitioning (unit weight regardless of input). \end{DoxyCompactList}\item 
void \hyperlink{namespaceoomph_1_1METIS_a58831157b0cfadc57485c3de01df7d78}{uniform\+\_\+partition\+\_\+mesh} (\hyperlink{classoomph_1_1Problem}{Problem} $\ast$problem\+\_\+pt, const unsigned \&ndomain, \hyperlink{classoomph_1_1Vector}{Vector}$<$ unsigned $>$ \&element\+\_\+domain)
\begin{DoxyCompactList}\small\item\em Partition mesh uniformly by dividing elements equally over the partitions, in the order in which they are returned by problem. On return, element\+\_\+domain\mbox{[}ielem\mbox{]} contains the number of the domain \mbox{[}0,1,...,ndomain-\/1\mbox{]} to which element ielem has been assigned. \end{DoxyCompactList}\item 
void \hyperlink{namespaceoomph_1_1METIS_aa3c7e4be46d6148cc60f43354127fc94}{partition\+\_\+mesh} (\hyperlink{classoomph_1_1Problem}{Problem} $\ast$problem\+\_\+pt, const unsigned \&ndomain, const unsigned \&objective, \hyperlink{classoomph_1_1Vector}{Vector}$<$ unsigned $>$ \&element\+\_\+domain)
\begin{DoxyCompactList}\small\item\em Use \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} to assign each element to a domain. On return, element\+\_\+domain\mbox{[}ielem\mbox{]} contains the number of the domain \mbox{[}0,1,...,ndomain-\/1\mbox{]} to which element ielem has been assigned. \end{DoxyCompactList}\item 
void \hyperlink{namespaceoomph_1_1METIS_a7504999ec1517cc95d0393753a714fe9}{partition\+\_\+mesh} (\hyperlink{classoomph_1_1OomphCommunicator}{Oomph\+Communicator} $\ast$comm\+\_\+pt, \hyperlink{classoomph_1_1Mesh}{Mesh} $\ast$mesh\+\_\+pt, const unsigned \&ndomain, const unsigned \&objective, \hyperlink{classoomph_1_1Vector}{Vector}$<$ unsigned $>$ \&element\+\_\+domain)
\begin{DoxyCompactList}\small\item\em Use \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} to assign each element to a domain. On return, element\+\_\+domain\mbox{[}ielem\mbox{]} contains the number of the domain \mbox{[}0,1,...,ndomain-\/1\mbox{]} to which element ielem has been assigned. \end{DoxyCompactList}\item 
void \hyperlink{namespaceoomph_1_1METIS_a9d95103cfa79d38f80b3b0a6db949701}{partition\+\_\+distributed\+\_\+mesh} (\hyperlink{classoomph_1_1Problem}{Problem} $\ast$problem\+\_\+pt, const unsigned \&objective, \hyperlink{classoomph_1_1Vector}{Vector}$<$ unsigned $>$ \&element\+\_\+domain\+\_\+on\+\_\+this\+\_\+proc, const bool \&bypass\+\_\+metis=false)
\begin{DoxyCompactList}\small\item\em Use \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} to assign each element in an already-\/distributed mesh to a domain. On return, element\+\_\+domain\+\_\+on\+\_\+this\+\_\+proc\mbox{[}e\mbox{]} contains the number of the domain \mbox{[}0,1,...,ndomain-\/1\mbox{]} to which non-\/halo element e on T\+HE C\+U\+R\+R\+E\+NT P\+R\+O\+C\+E\+S\+S\+OR O\+N\+LY has been assigned. The order of the non-\/halo elements is the same as in the \hyperlink{classoomph_1_1Problem}{Problem}\textquotesingle{}s mesh, with the halo elements being skipped. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{namespaceoomph_1_1METIS_aec228e35df8426d16639b961fcf98df1}{Error\+To\+Weight\+Fct\+Pt} \hyperlink{namespaceoomph_1_1METIS_af21fbb8dba025be51b3e27c1822243a5}{Error\+\_\+to\+\_\+weight\+\_\+fct\+\_\+pt} =\&\hyperlink{namespaceoomph_1_1METIS_af5633647d4ff099648151db2d7d0a1e5}{default\+\_\+error\+\_\+to\+\_\+weight\+\_\+fct}
\begin{DoxyCompactList}\small\item\em Function pointer to to function that translates spatial error into weight for \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} partitioning. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Namespace for \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} graph partitioning routines. 

\subsection{Typedef Documentation}
\mbox{\Hypertarget{namespaceoomph_1_1METIS_aec228e35df8426d16639b961fcf98df1}\label{namespaceoomph_1_1METIS_aec228e35df8426d16639b961fcf98df1}} 
\index{oomph\+::\+M\+E\+T\+IS@{oomph\+::\+M\+E\+T\+IS}!Error\+To\+Weight\+Fct\+Pt@{Error\+To\+Weight\+Fct\+Pt}}
\index{Error\+To\+Weight\+Fct\+Pt@{Error\+To\+Weight\+Fct\+Pt}!oomph\+::\+M\+E\+T\+IS@{oomph\+::\+M\+E\+T\+IS}}
\subsubsection{\texorpdfstring{Error\+To\+Weight\+Fct\+Pt}{ErrorToWeightFctPt}}
{\footnotesize\ttfamily typedef void($\ast$ oomph\+::\+M\+E\+T\+I\+S\+::\+Error\+To\+Weight\+Fct\+Pt) (const double \&spatial\+\_\+error, const double \&max\+\_\+error, const double \&min\+\_\+error, int \&weight)}



Typedef for function pointer to to function that translates spatial error into weight for \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} partitioning. 



Definition at line 94 of file partitioning.\+h.



\subsection{Function Documentation}
\mbox{\Hypertarget{namespaceoomph_1_1METIS_af5633647d4ff099648151db2d7d0a1e5}\label{namespaceoomph_1_1METIS_af5633647d4ff099648151db2d7d0a1e5}} 
\index{oomph\+::\+M\+E\+T\+IS@{oomph\+::\+M\+E\+T\+IS}!default\+\_\+error\+\_\+to\+\_\+weight\+\_\+fct@{default\+\_\+error\+\_\+to\+\_\+weight\+\_\+fct}}
\index{default\+\_\+error\+\_\+to\+\_\+weight\+\_\+fct@{default\+\_\+error\+\_\+to\+\_\+weight\+\_\+fct}!oomph\+::\+M\+E\+T\+IS@{oomph\+::\+M\+E\+T\+IS}}
\subsubsection{\texorpdfstring{default\+\_\+error\+\_\+to\+\_\+weight\+\_\+fct()}{default\_error\_to\_weight\_fct()}}
{\footnotesize\ttfamily void oomph\+::\+M\+E\+T\+I\+S\+::default\+\_\+error\+\_\+to\+\_\+weight\+\_\+fct (\begin{DoxyParamCaption}\item[{const double \&}]{spatial\+\_\+error,  }\item[{const double \&}]{max\+\_\+error,  }\item[{const double \&}]{min\+\_\+error,  }\item[{int \&}]{weight }\end{DoxyParamCaption})}



Default function that translates spatial error into weight for \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} partitioning (unit weight regardless of input). 

Default function that translates spatial error into weight for \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} partitioning (unit weight regardless of input) 

Definition at line 53 of file partitioning.\+cc.



Referenced by partition\+\_\+mesh().

\mbox{\Hypertarget{namespaceoomph_1_1METIS_a9d95103cfa79d38f80b3b0a6db949701}\label{namespaceoomph_1_1METIS_a9d95103cfa79d38f80b3b0a6db949701}} 
\index{oomph\+::\+M\+E\+T\+IS@{oomph\+::\+M\+E\+T\+IS}!partition\+\_\+distributed\+\_\+mesh@{partition\+\_\+distributed\+\_\+mesh}}
\index{partition\+\_\+distributed\+\_\+mesh@{partition\+\_\+distributed\+\_\+mesh}!oomph\+::\+M\+E\+T\+IS@{oomph\+::\+M\+E\+T\+IS}}
\subsubsection{\texorpdfstring{partition\+\_\+distributed\+\_\+mesh()}{partition\_distributed\_mesh()}}
{\footnotesize\ttfamily void oomph\+::\+M\+E\+T\+I\+S\+::partition\+\_\+distributed\+\_\+mesh (\begin{DoxyParamCaption}\item[{\hyperlink{classoomph_1_1Problem}{Problem} $\ast$}]{problem\+\_\+pt,  }\item[{const unsigned \&}]{objective,  }\item[{\hyperlink{classoomph_1_1Vector}{Vector}$<$ unsigned $>$ \&}]{element\+\_\+domain\+\_\+on\+\_\+this\+\_\+proc,  }\item[{const bool \&}]{bypass\+\_\+metis = {\ttfamily false} }\end{DoxyParamCaption})}



Use \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} to assign each element in an already-\/distributed mesh to a domain. On return, element\+\_\+domain\+\_\+on\+\_\+this\+\_\+proc\mbox{[}e\mbox{]} contains the number of the domain \mbox{[}0,1,...,ndomain-\/1\mbox{]} to which non-\/halo element e on T\+HE C\+U\+R\+R\+E\+NT P\+R\+O\+C\+E\+S\+S\+OR O\+N\+LY has been assigned. The order of the non-\/halo elements is the same as in the \hyperlink{classoomph_1_1Problem}{Problem}\textquotesingle{}s mesh, with the halo elements being skipped. 

Use \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} to assign each element in an already-\/distributed mesh to a domain. On return, element\+\_\+domain\+\_\+on\+\_\+this\+\_\+proc\mbox{[}e\mbox{]} contains the number of the domain \mbox{[}0,1,...,ndomain-\/1\mbox{]} to which non-\/halo element e on T\+HE C\+U\+R\+R\+E\+NT P\+R\+O\+C\+E\+S\+S\+OR O\+N\+LY has been assigned. The order of the non-\/halo elements is the same as in the \hyperlink{classoomph_1_1Problem}{Problem}\textquotesingle{}s mesh, with the halo elements being skipped. Objective\+:

Objective\+:
\begin{DoxyItemize}
\item objective=0\+: minimise edgecut.
\item objective=1\+: minimise total communications volume.
\end{DoxyItemize}The partioning is based on the dof graph of the complete mesh by taking into account which global equation numbers are affected by each element and connecting elements which affect the same global equation number. Partitioning is done such that all elements associated with the same tree root move together. Non-\/refineable elements are treated as their own root elements. If the optional boolean flag is set to true (it defaults to false) each processor assigns a dumb-\/but-\/repeatable equidistribution of its non-\/halo elements over the domains and outputs the input that would have gone into \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} in the file metis\+\_\+input\+\_\+for\+\_\+validation.\+dat


\begin{DoxyItemize}
\item objective=0\+: minimise edgecut.
\item objective=1\+: minimise total communications volume.
\end{DoxyItemize}The partioning is based on the dof graph of the complete mesh by taking into account which global equation numbers are affected by each element and connecting elements which affect the same global equation number. Partitioning is done such that all elements associated with the same tree root move together. Non-\/refineable elements are treated as their own root elements. If the optional boolean flag is set to true (it defaults to false) each processor assigns a dumb-\/but-\/repeatable equidistribution of its non-\/halo elements over the domains and outputs the input that would have gone into \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} in the file metis\+\_\+input\+\_\+for\+\_\+validation.\+dat 

Definition at line 523 of file partitioning.\+cc.



References oomph\+::\+Problem\+::communicator\+\_\+pt(), e, oomph\+::\+Mesh\+::element\+\_\+pt(), oomph\+::\+Problem\+::elemental\+\_\+assembly\+\_\+time(), oomph\+::\+Generalised\+Element\+::eqn\+\_\+number(), i, oomph\+::\+Generalised\+Element\+::is\+\_\+halo(), oomph\+::\+Problem\+::mesh\+\_\+pt(), oomph\+::\+M\+E\+T\+I\+S\+\_\+\+Part\+Graph\+Kway(), oomph\+::\+M\+E\+T\+I\+S\+\_\+\+Part\+Graph\+V\+Kway(), oomph\+::\+Generalised\+Element\+::ndof(), oomph\+::\+Mesh\+::nelement(), oomph\+::oomph\+\_\+info, and oomph\+::\+Refineable\+Element\+::root\+\_\+element\+\_\+pt().



Referenced by oomph\+::\+Problem\+::load\+\_\+balance(), and partition\+\_\+mesh().

\mbox{\Hypertarget{namespaceoomph_1_1METIS_aa3c7e4be46d6148cc60f43354127fc94}\label{namespaceoomph_1_1METIS_aa3c7e4be46d6148cc60f43354127fc94}} 
\index{oomph\+::\+M\+E\+T\+IS@{oomph\+::\+M\+E\+T\+IS}!partition\+\_\+mesh@{partition\+\_\+mesh}}
\index{partition\+\_\+mesh@{partition\+\_\+mesh}!oomph\+::\+M\+E\+T\+IS@{oomph\+::\+M\+E\+T\+IS}}
\subsubsection{\texorpdfstring{partition\+\_\+mesh()}{partition\_mesh()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void oomph\+::\+M\+E\+T\+I\+S\+::partition\+\_\+mesh (\begin{DoxyParamCaption}\item[{\hyperlink{classoomph_1_1Problem}{Problem} $\ast$}]{problem\+\_\+pt,  }\item[{const unsigned \&}]{ndomain,  }\item[{const unsigned \&}]{objective,  }\item[{\hyperlink{classoomph_1_1Vector}{Vector}$<$ unsigned $>$ \&}]{element\+\_\+domain }\end{DoxyParamCaption})}



Use \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} to assign each element to a domain. On return, element\+\_\+domain\mbox{[}ielem\mbox{]} contains the number of the domain \mbox{[}0,1,...,ndomain-\/1\mbox{]} to which element ielem has been assigned. 


\begin{DoxyItemize}
\item objective=0\+: minimise edgecut.
\item objective=1\+: minimise total communications volume.
\end{DoxyItemize}Partioning is based on nodal graph of mesh.

Use \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} to assign each element to a domain. On return, element\+\_\+domain\mbox{[}ielem\mbox{]} contains the number of the domain \mbox{[}0,1,...,ndomain-\/1\mbox{]} to which element ielem has been assigned.
\begin{DoxyItemize}
\item objective=0\+: minimise edgecut.
\item objective=1\+: minimise total communications volume.
\end{DoxyItemize}Partioning is based on dual graph of mesh. 

Definition at line 122 of file partitioning.\+cc.



References default\+\_\+error\+\_\+to\+\_\+weight\+\_\+fct(), e, oomph\+::\+Mesh\+::element\+\_\+pt(), oomph\+::\+Generalised\+Element\+::eqn\+\_\+number(), Error\+\_\+to\+\_\+weight\+\_\+fct\+\_\+pt, oomph\+::\+Problem\+::mesh\+\_\+pt(), oomph\+::\+M\+E\+T\+I\+S\+\_\+\+Part\+Graph\+Kway(), oomph\+::\+M\+E\+T\+I\+S\+\_\+\+Part\+Graph\+V\+Kway(), oomph\+::\+Generalised\+Element\+::ndof(), oomph\+::\+Mesh\+::nelement(), oomph\+::\+Problem\+::nsub\+\_\+mesh(), oomph\+::oomph\+\_\+info, partition\+\_\+distributed\+\_\+mesh(), oomph\+::\+Refineable\+Mesh\+Base\+::spatial\+\_\+error\+\_\+estimator\+\_\+pt(), and oomph\+::\+Cumulative\+Timings\+::start().



Referenced by oomph\+::\+Problem\+::partition\+\_\+global\+\_\+mesh().

\mbox{\Hypertarget{namespaceoomph_1_1METIS_a7504999ec1517cc95d0393753a714fe9}\label{namespaceoomph_1_1METIS_a7504999ec1517cc95d0393753a714fe9}} 
\index{oomph\+::\+M\+E\+T\+IS@{oomph\+::\+M\+E\+T\+IS}!partition\+\_\+mesh@{partition\+\_\+mesh}}
\index{partition\+\_\+mesh@{partition\+\_\+mesh}!oomph\+::\+M\+E\+T\+IS@{oomph\+::\+M\+E\+T\+IS}}
\subsubsection{\texorpdfstring{partition\+\_\+mesh()}{partition\_mesh()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void oomph\+::\+M\+E\+T\+I\+S\+::partition\+\_\+mesh (\begin{DoxyParamCaption}\item[{\hyperlink{classoomph_1_1OomphCommunicator}{Oomph\+Communicator} $\ast$}]{comm\+\_\+pt,  }\item[{\hyperlink{classoomph_1_1Mesh}{Mesh} $\ast$}]{mesh\+\_\+pt,  }\item[{const unsigned \&}]{ndomain,  }\item[{const unsigned \&}]{objective,  }\item[{\hyperlink{classoomph_1_1Vector}{Vector}$<$ unsigned $>$ \&}]{element\+\_\+domain }\end{DoxyParamCaption})}



Use \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} to assign each element to a domain. On return, element\+\_\+domain\mbox{[}ielem\mbox{]} contains the number of the domain \mbox{[}0,1,...,ndomain-\/1\mbox{]} to which element ielem has been assigned. 


\begin{DoxyItemize}
\item objective=0\+: minimise edgecut.
\item objective=1\+: minimise total communications volume.
\end{DoxyItemize}Partioning is based on nodal graph of mesh. \mbox{\Hypertarget{namespaceoomph_1_1METIS_a58831157b0cfadc57485c3de01df7d78}\label{namespaceoomph_1_1METIS_a58831157b0cfadc57485c3de01df7d78}} 
\index{oomph\+::\+M\+E\+T\+IS@{oomph\+::\+M\+E\+T\+IS}!uniform\+\_\+partition\+\_\+mesh@{uniform\+\_\+partition\+\_\+mesh}}
\index{uniform\+\_\+partition\+\_\+mesh@{uniform\+\_\+partition\+\_\+mesh}!oomph\+::\+M\+E\+T\+IS@{oomph\+::\+M\+E\+T\+IS}}
\subsubsection{\texorpdfstring{uniform\+\_\+partition\+\_\+mesh()}{uniform\_partition\_mesh()}}
{\footnotesize\ttfamily void oomph\+::\+M\+E\+T\+I\+S\+::uniform\+\_\+partition\+\_\+mesh (\begin{DoxyParamCaption}\item[{\hyperlink{classoomph_1_1Problem}{Problem} $\ast$}]{problem\+\_\+pt,  }\item[{const unsigned \&}]{ndomain,  }\item[{\hyperlink{classoomph_1_1Vector}{Vector}$<$ unsigned $>$ \&}]{element\+\_\+domain }\end{DoxyParamCaption})}



Partition mesh uniformly by dividing elements equally over the partitions, in the order in which they are returned by problem. On return, element\+\_\+domain\mbox{[}ielem\mbox{]} contains the number of the domain \mbox{[}0,1,...,ndomain-\/1\mbox{]} to which element ielem has been assigned. 

Partition mesh uniformly by dividing elements equally over the partitions, in the order in which they are returned by problem. On return, element\+\_\+domain\mbox{[}ielem\mbox{]} contains the number of the domain \mbox{[}0,1,...,ndomain-\/1\mbox{]} to which element ielem has been assigned. 

Definition at line 78 of file partitioning.\+cc.



References oomph\+::\+Problem\+::mesh\+\_\+pt(), and oomph\+::\+Mesh\+::nelement().



\subsection{Variable Documentation}
\mbox{\Hypertarget{namespaceoomph_1_1METIS_af21fbb8dba025be51b3e27c1822243a5}\label{namespaceoomph_1_1METIS_af21fbb8dba025be51b3e27c1822243a5}} 
\index{oomph\+::\+M\+E\+T\+IS@{oomph\+::\+M\+E\+T\+IS}!Error\+\_\+to\+\_\+weight\+\_\+fct\+\_\+pt@{Error\+\_\+to\+\_\+weight\+\_\+fct\+\_\+pt}}
\index{Error\+\_\+to\+\_\+weight\+\_\+fct\+\_\+pt@{Error\+\_\+to\+\_\+weight\+\_\+fct\+\_\+pt}!oomph\+::\+M\+E\+T\+IS@{oomph\+::\+M\+E\+T\+IS}}
\subsubsection{\texorpdfstring{Error\+\_\+to\+\_\+weight\+\_\+fct\+\_\+pt}{Error\_to\_weight\_fct\_pt}}
{\footnotesize\ttfamily \hyperlink{namespaceoomph_1_1METIS_aec228e35df8426d16639b961fcf98df1}{Error\+To\+Weight\+Fct\+Pt} oomph\+::\+M\+E\+T\+I\+S\+::\+Error\+\_\+to\+\_\+weight\+\_\+fct\+\_\+pt =\&\hyperlink{namespaceoomph_1_1METIS_af5633647d4ff099648151db2d7d0a1e5}{default\+\_\+error\+\_\+to\+\_\+weight\+\_\+fct}}



Function pointer to to function that translates spatial error into weight for \hyperlink{namespaceoomph_1_1METIS}{M\+E\+T\+IS} partitioning. 



Definition at line 63 of file partitioning.\+cc.



Referenced by partition\+\_\+mesh().

